\begin{figure*}
  \begin{mdframed}
    \centering
    \[\!\!%
      \setlength{\arraycolsep}{4pt}%
      \begin{array}{llcl}
        \textsc{E-Lam}
        & {\rvApp{\rvAbs[A]{x}{M}}{V}}
        & \rvRedArrPure
        & {\rvSub{M}{x}{V}}
        \\
        \textsc{E-Unit}
        & {\rvLetUnit{\rvUnit}{M}}
        & \rvRedArrPure
        & {\rvVar{M}}
        \\
        \textsc{E-Pair}
        & {\rvLetPair{x}{y}{\rvPair{V}{W}}{M}}
        & \rvRedArrPure
        & {\rvSub{M}{\tm{x}\st{,}\;\tm{y}}{\tm{V}\st{,}\;\tm{W}}}
        \\
        \textsc{E-Inl}
        & {\rvCaseSum{\rvInl{V}}{x}{M}{y}{N}}
        & \rvRedArrPure
        & {\rvSub{M}{x}{V}}
        \\
        \textsc{E-Inr}
        & {\rvCaseSum{\rvInr{V}}{x}{M}{y}{N}}
        & \rvRedArrPure
        & {\rvSub{N}{y}{V}}
        \\
        \textsc{E-Some}
        & {\rvCaseOpt{\rvSome{V}}{x}{M}{N}}
        & \rvRedArrPure
        & {\rvSub{M}{x}{V}}
        \\
        \textsc{E-None}
        & {\rvCaseOpt{\rvNone}{x}{M}{N}}
        & \rvRedArrPure
        & {\rvVar{N}}
        \\
        \textsc{E-Lift}
        & {\rvPlug{E}{M}}
        & \rvRedArrPure
        & {\rvPlug{E}{M'}}\st{,}
          \quad\text{if}\;\rvRedPure{M}{M'}
      \end{array}
    \]
    {
      \setstretch{2.0}
      \begin{prooftree}
        \AXC{\tm{a} is fresh}
        \RightLabel{\textsc{E-Fork}}
        \UIC{$
          \rvRedTup{\rvHeap{H}}{\rvPlug{F}{\rvFork{\rvAbs[S]{x}{M}}}}
          \rvRedArr
          \rvRedTup{\rvHeapData{\rvHeap{H}}{a}{\rvMemEmp}}{\rvPlug{F}{a}\st{,}\;\rvChild{\rvSub{M}{x}{a}}}$}
      \end{prooftree}
      \begin{prooftree}
        \AXC{\tm{b} is fresh}
        \RightLabel{E-Send}
        \UIC{$
          \rvRedTup{\rvHeapData{\rvHeap{H}}{a}{\rvMemEmp}}{\rvPlug{F}{\rvSend{U}{a}}}
          \rvRedArr
          \rvRedTup{\rvHeapData{\rvHeapData{\rvHeap{H}}{a}{\rvMemData{U}{b}}}{b}{\rvMemEmp}}{\rvPlug{F}{b}}$}
      \end{prooftree}
      \begin{prooftree}
        \AXC{}
        \RightLabel{\textsc{E-Recv}}
        \UIC{$
          \rvRedTup{\rvHeapData{\rvHeap{H}}{a}{\rvMemData{U}{b}}}{\rvPlug{F}{\rvRecv{a}}}
          \rvRedArr
          \rvRedTup{\rvHeap{H}}{\rvPlug{F}{\rvSome{\rvPair{U}{b}}}}$}
      \end{prooftree}
      \begin{prooftree}
        \AXC{}
        \RightLabel{\textsc{E-Close}}
        \UIC{$
          \rvRedTup
          {\rvHeapData{\rvHeap{H}}{a}{\rvMemEmp}}
          {\rvPlug{F}{\rvClose{a}}\st{,}\;\rvPlug{F'}{\rvClose{a}}}
          \rvRedArr
          \rvRedTup{\rvHeap{H}}{\rvPlug{F}{\rvSome{\rvUnit}}\st{,}\;\rvPlug{F'}{\rvSome{\rvUnit}}}$}
      \end{prooftree}
      \begin{center}
        \begin{prooftree*}
          \AXC{$\rvArc{a}{\rvHeap{H}}{\rvConf{C}}\le{1}$}
          \RightLabel{\textsc{E-Zap}}
          \UIC{$
            \rvRedTup[\rvConf{C}]{\rvHeapData{\rvHeap{H}}{a}{\rvMem{M}}}{}
            \rvRedArr
            \rvRedTup[\rvConf{C}]{\rvHeapDisc{\rvHeap{H}}{a}}{}$}
        \end{prooftree*}%
        \begin{prooftree*}
          \AXC{$\rvArc{a}{\rvHeap{H}}{\rvConf{C}}={0}$}
          \RightLabel{\textsc{E-GC}}
          \UIC{$
            \rvRedTup[\rvConf{C}]{\rvHeapDisc{\rvHeap{H}}{a}}{}
            \rvRedArr
            \rvRedTup[\rvConf{C}]{\rvHeap{H}}{}$}
        \end{prooftree*}
      \end{center}
      \begin{prooftree}
        \AXC{}
        \RightLabel{\textsc{E-CloseZap}}
        \UIC{$
          \rvRedTup{\rvHeapDisc{\rvHeap{H}}{a}}{\rvPlug{F}{\rvClose{a}}}
          \rvRedArr
          \rvRedTup{\rvHeapDisc{\rvHeap{H}}{a}}{\rvPlug{F}{\rvNone}}$}
      \end{prooftree}
      \begin{prooftree}
        \AXC{}
        \RightLabel{\textsc{E-RecvZap}}
        \UIC{$
          \rvRedTup{\rvHeapDisc{\rvHeap{H}}{a}}{\rvPlug{F}{\rvRecv{a}}}
          \rvRedArr
          \rvRedTup{\rvHeapDisc{\rvHeap{H}}{a}}{\rvPlug{F}{\rvNone}}$}
      \end{prooftree}
      \begin{center}
        \begin{prooftree*}
          \AXC{}
          \RightLabel{\textsc{E-HaltChild}}
          \UIC{$
            \rvRedTup[\rvConf{C}]{\rvHeap{H}}{\rvChild{\rvVar{V}}}
            \rvRedArr
            \rvRedTup[\rvConf{C}]{\rvHeap{H}}{}$}
        \end{prooftree*}%
        \begin{prooftree*}
          \AXC{}
          \RightLabel{\textsc{E-HaltMain}}
          \UIC{$
            \rvRedTup[\rvConf{C}]{\rvHeap{H}}{\rvMain{\rvNone}}
            \rvRedArr
            \rvRedTup[\rvConf{C}]{\rvHeap{H}}{\rvPanic}$}
        \end{prooftree*}
      \end{center}
      \begin{prooftree}
        \AXC{$\rvRedPure{M}{M'}$}
        \RightLabel{\textsc{E-LiftM}}
        \UIC{$
          \rvRedTup{\rvHeap{H}}{\rvThread{\phi}{M}}
          \rvRedArr
          \rvRedTup{\rvHeap{H}}{\rvThread{\phi}{M'}}$}
      \end{prooftree}
    }
  \end{mdframed}

  \caption{Rusty Variation, reduction semantics.}
  \label{fig:rv-reduction}
\end{figure*}
