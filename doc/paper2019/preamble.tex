\usepackage{mdframed}
\usepackage{mathtools}
\usepackage{bussproofs}
\EnableBpAbbreviations
\newenvironment{prooftree*}{\leavevmode\hbox\bgroup}{\DisplayProof\egroup}

\usepackage{xcolor}
\definecolor{stcolor}{HTML}{000000}
\definecolor{tmcolor}{HTML}{4791d4}
\definecolor{tycolor}{HTML}{ce537a}
\newcommand{\st}[1]{\textcolor{stcolor}{#1}}
\newcommand{\tm}[1]{\textcolor{tmcolor}{#1}}
\newcommand{\ty}[1]{\textcolor{tycolor}{#1}}
\newcommand{\tmty}[2]{\tm{#1}:\ty{#2}}
\newcommand{\seq}[3]{#1\vdash\tmty{#2}{#3}}


% GV syntax

\newcommand{\gvAbs}[3][]{\ensuremath{\lambda{#2}:{#1}.{#3}}}
\newcommand{\gvApp}[2]{\ensuremath{#1\;#2}}
\newcommand{\gvUnit}[0]{\ensuremath{()}}
\newcommand{\gvLetUnit}[2]{\ensuremath{\mathbf{let}\;\gvUnit\;=\;#1\;\mathbf{in}\;#2}}
\newcommand{\gvPair}[2]{\ensuremath{(#1, #2)}}
\newcommand{\gvLetPair}[4]{\ensuremath{%
    \mathbf{let}\;\gvPair{#1}{#2}\;=\;#3\;\mathbf{in}\;#4}}
\newcommand{\gvInl}[1]{\ensuremath{\mathbf{inl}\;#1}}
\newcommand{\gvInr}[1]{\ensuremath{\mathbf{inr}\;#1}}
\newcommand{\gvCaseSum}[5]{\ensuremath{%
    \mathbf{case}\;#1\;\{\gvInl{#2}:#3;\gvInr{#4}:#5\}}}
\newcommand{\gvFork}[0]{\ensuremath{\st{\mathbf{fork}}}}
\newcommand{\gvSend}[0]{\ensuremath{\st{\mathbf{send}}}}
\newcommand{\gvRecv}[0]{\ensuremath{\st{\mathbf{recv}}}}
\newcommand{\gvClose}[0]{\ensuremath{\st{\mathbf{close}}}}
\newcommand{\gvCancel}[0]{\ensuremath{\st{\mathbf{cancel}}}}
\newcommand{\gvRaise}[0]{\ensuremath{\st{\mathbf{raise}}}}
\newcommand{\gvTry}[4]{\ensuremath{%
    {\mathbf{try}\;#1\;\mathbf{as}\;#2\;\mathbf{in}\;#3\;\mathbf{otherwise}\;#4}}}

% RV syntax

\newcommand{\rvTyUnit}[0]{\texttt{\st{()}}}
\newcommand{\rvTyFun}[2]{\texttt{%
    \ty{FnOnce}\st{(}\ty{A}\st{)}\;\st{$\rightarrow$}\;\ty{B}}}
\newcommand{\rvTySum}[2]{\texttt{%
    \ty{Either}\st{<}\ty{A}\st{,}\;\ty{B}\st{>}}}
\newcommand{\rvTyPair}[2]{\texttt{\st{(}\ty{#1}\st{,}\;\ty{#2}\st{)}}}
\newcommand{\rvTyOption}[1]{\texttt{%
    \ty{Option}\st{<}\ty{#1}\st{>}}}

\newcommand{\rvTySend}[2]{\texttt{\ty{Send}\st{<}\ty{#1}\st{,}\;\ty{#2}\st{>}}}
\newcommand{\rvTyRecv}[2]{\texttt{\ty{Recv}\st{<}\ty{#1}\st{,}\;\ty{#2}\st{>}}}
\newcommand{\rvTyEnd}[0]{\texttt{\ty{End}}}
\newcommand{\rvDual}[1]{\texttt{\ty{#1}\st{:\!:}\ty{Dual}}}

\newcommand{\rvVar}[1]{\texttt{\tm{#1}}}
\newcommand{\rvAbs}[3][]{\texttt{%
    \st{\textbf{move}}\;\st{|}\tm{#2}\st{:}\ty{#1}\st{|}\;\st{\{}\;\tm{#3}\;\st{\}}}}
\newcommand{\rvApp}[2]{\texttt{\tm{#1}\st{(}\tm{#2}\st{)}}}
\newcommand{\rvUnit}[0]{\texttt{\st{()}}}
\newcommand{\rvLetUnit}[2]{\texttt{%
    \st{\textbf{let}}\;\rvUnit\;\st{=}\;\tm{#1}\st{;}\;\tm{#2}}}
\newcommand{\rvPair}[2]{\texttt{\st{(}\tm{#1}\st{,}\;\tm{#2}\st{)}}}
\newcommand{\rvLetPair}[4]{\texttt{%
    \st{\textbf{let}}\;\rvPair{#1}{#2}\;\st{=}\;\tm{#3}\st{;}\;\tm{#4}}}
\newcommand{\rvInl}[1]{\texttt{\rvApp{\st{Left}}{#1}}}
\newcommand{\rvInr}[1]{\texttt{\rvApp{\st{Right}}{#1}}}
\newcommand{\rvCaseSum}[5]{\texttt{%
    \st{\textbf{match}}\;\tm{#1}\;\st{\{}\;%
    \rvInl{#2}\;\st{$\Rightarrow$}\;\tm{#3}\st{;}\;%
    \rvInr{#4}\;\st{$\Rightarrow$}\;\tm{#5}\;\st{\}}}}
\newcommand{\rvFork}[1]{\rvApp{\st{\textbf{fork}}}{#1}}
\newcommand{\rvSend}[2]{\rvApp{\st{\textbf{send}}}{#1\st{,}\;#2}}
\newcommand{\rvRecv}[1]{\rvApp{\st{\textbf{recv}}}{#1}}
\newcommand{\rvClose}[1]{\rvApp{\st{\textbf{close}}}{#1}}
\newcommand{\rvCancel}[1]{\rvApp{\st{\textbf{cancel}}}{#1}}
\newcommand{\rvSome}[1]{\rvApp{\st{Some}}{#1}}
\newcommand{\rvNone}[0]{\texttt{\st{None}}}
\newcommand{\rvCaseOption}[4]{\texttt{%
    \st{\textbf{match}}\;\tm{#1}\;\st{\{}\;%
    \rvSome{#2}\;\st{$\Rightarrow$}\;\tm{#3}\st{;}\;%
    \rvNone{}\;\st{$\Rightarrow$}\;\tm{#4}\;\st{\}}}}

